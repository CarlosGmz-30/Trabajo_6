<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JayrGil Trabajo7</title>
  </head>
  <body>
    <h1>Formulario de registro</h1>
    <form action="JayrGil_T7_Muestra.html" method="get">
      <label> Nombre: </label><input type="text" name="name" /> <br /><br />
      <label> Apellido1: </label><input type="text" name="surname1" />
      <br /><br />
      <label> Apellido2: </label><input type="text" name="surname2" />
      <br /><br />
      <label> Fecha de nacimiento: </label
      ><input type="date" name="birthday" /> <br /><br />
      <label> Correo: </label><input type="email" name="mail" /><br /><br />
      <label> Telefono </label
      ><input type="number" name="phoneNumber" /><br /><br />
      <label> Usuario </label><input type="text" name="user" /><br /><br />
      <label> Password: </label
      ><input type="password" name="password" /><br /><br />
      <label> Repetir Password:</label
      ><input type="password" name="passwordRepit" /><br /><br />
      <input type="submit" value="Registrar usuario" /> <br /><br />
    </form>

    <script>
      getParameter = (key) => {
        address = window.location.search;
        parameterlist = new URLSearchParams(address);
        return parameterlist.get(key);
      };

      console.log(getParameter("name"));
      console.log(getParameter("surname1"));
      console.log(getParameter("surname2"));
      console.log(getParameter("birthday"));
      console.log(getParameter("user"));
      console.log(getParameter("password"));
      console.log(getParameter("passwordRepit"));
      console.log(getParameter("mail"));
      console.log(getParameter("phoneNumber"));

      var name = getParameter("name");
      var surname1 = getParameter("surname1");
      var surname2 = getParameter("surname2");
      var birthday = getParameter("birthday");
      var user = getParameter("user");
      var password = getParameter("password");
      var passwordRepit = getParameter("passwordRepit");
      var mail = getParameter("mail");
      var phoneNumber = getParameter("phoneNumber");

      if (name != null) {
        document.getElementById("name").innerHTML = name;
      }
      if (surname1 != null) {
        document.getElementById("surname1").innerHTML = surname1;
      }
      if (surname2 != null) {
        document.getElementById("surname2").innerHTML = surname2;
      }

      if (birthday != null) {
        var date = new Date();
        var currentYear = date.getFullYear();
        console.log(currentYear); // para ver el a√±o actual en la consola

        document.getElementById("birthday");
        birthday = birthday.split("-");
        var age = currentYear - birthday[0];
        document.getElementById("birthday").innerHTML = age;
      }

      if (mail != null) {
        document.getElementById("mail").innerHTML = mail;
      }

      if (phoneNumber != null) {
        document.getElementById("phoneNumber").innerHTML = phoneNumber;
      }

      if (user != null) {
        document.getElementById("user").innerHTML = user;
      }

      if (password != passwordRepit) {
        alert("Las password no coinciden");
      } else if (password.length < 5) {
        alert("La password no es segura, usa una con 5 o mas caracters");
      }
    </script>
  </body>
</html>
